import{P as h}from"./papaparse.min-DhyPNovB.js";import"./index-Dq16Dowm.js";const w=["/docs/DayTrade Strategy.csv","/docs/DayTrade%20Strategy.csv"];function y(i){for(let t=0;t<i.length;t++){const e=i[t].map(n=>(n||"").toString().trim().toLowerCase());if(e.includes("date placed")||e.includes("date placed".toLowerCase())||e.includes("date")||e.includes("ticker")&&e.includes("p&l"))return t}return-1}function m(i,t){const e={};for(const o in t)e[o]=i[t[o]]!==void 0?i[t[o]]:"";const n={date:e.Date||e.date||"",symbol:e.Ticker||e.ticker||"",entry:e.Entry!==void 0?Number(e.Entry):void 0,exit:e.Exit!==void 0?Number(e.Exit):void 0,pnl:e.PnL!==void 0?Number(e.PnL):e["P&L"]!==void 0?Number(e["P&L"]):void 0,roi:e["% Return"]!==void 0?Number(String(e["% Return"]).replace("%","")):void 0,cumPnlDay:e["Cum PnL (Day)"]!==void 0?Number(e["Cum PnL (Day)"]):void 0,notes:e.Notes||e.notes||"",raw:e},r=[];if((n.pnl===void 0||Number.isNaN(n.pnl))&&r.push("Missing PnL"),n.roi!==void 0&&Number.isNaN(n.roi)&&r.push("Invalid % Return"),n.roi===void 0&&r.length===0&&(n.roi=void 0),n.issues=r,n.date){const o=new Date(n.date);if(!Number.isNaN(o.getTime())){const f=o.getFullYear(),c=String(o.getMonth()+1).padStart(2,"0"),s=String(o.getDate()).padStart(2,"0");n.date=`${f}-${c}-${s}`}}return n}async function E(){for(const i of w)try{const t=await fetch(i);if(!t.ok)continue;const e=await t.text(),r=h.parse(e,{skipEmptyLines:!0,dynamicTyping:!1}).data;if(!r||!r.length)throw new Error("Empty CSV");const o=y(r);if(o===-1){if(r.length<2)throw new Error("No header row found");const u=r[0].map(d=>(d||"").toString().trim()),l={};return u.forEach((d,p)=>l[d]=p),r.slice(1).map(d=>m(d,l)).filter(d=>d.symbol||d.date)}const c=r[o].map(a=>(a||"").toString().trim()),s={};return c.forEach((a,u)=>s[a]=u),r.slice(o+1).map(a=>m(a,s)).filter(a=>a.symbol||a.date)}catch{}throw new Error("No local CSV found in /docs")}export{E as loadLocalCsv};
